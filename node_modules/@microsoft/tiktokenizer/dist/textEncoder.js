var require_textEncoder = __commonJSMin(exports => {
  "use strict";

  Object.defineProperty(exports, "__esModule", {
    value: !0
  });
  exports.makeTextEncoder = void 0;
  var _UniversalTextEncoder = class _UniversalTextEncoder {
    constructor() {
      this.length = 0, this.encoder = new TextEncoder();
    }
    encode(text) {
      let arr = this.encoder.encode(text);
      return this.length = arr.length, arr;
    }
  };
  __name(_UniversalTextEncoder, "UniversalTextEncoder");
  var UniversalTextEncoder = _UniversalTextEncoder,
    _NodeTextEncoder = class _NodeTextEncoder {
      constructor() {
        this.buffer = Buffer.alloc(256), this.length = 0;
      }
      encode(text) {
        for (;;) {
          if (this.length = this.buffer.write(text, "utf8"), this.length < this.buffer.length - 4) return this.buffer;
          this.buffer = Buffer.alloc(this.length * 2), this.length = this.buffer.write(text);
        }
      }
    };
  __name(_NodeTextEncoder, "NodeTextEncoder");
  var NodeTextEncoder = _NodeTextEncoder,
    makeTextEncoder = __name(() => typeof Buffer < "u" ? new NodeTextEncoder() : new UniversalTextEncoder(), "makeTextEncoder");
  exports.makeTextEncoder = makeTextEncoder;
});